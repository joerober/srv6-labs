# Topology
#
#          p2
#         /  \
#  ce5--pe1  pe4--ce6
#         \  /
#          p3

name: frrlab

topology:
  nodes:
    pe1:
      kind: linux
      image: frrouting/frr:v8.4.1
      binds:
        - router1/daemons:/etc/frr/daemons
        #- router1/frr.conf:/etc/frr/frr.conf
    p2:
      kind: linux
      image: frrouting/frr:v7.5.1
      binds:
        - router2/daemons:/etc/frr/daemons
        #- router2/frr.conf:/etc/frr/frr.conf
    p3:
      kind: linux
      image: frrouting/frr:v7.5.1
      binds:
        - router3/daemons:/etc/frr/daemons
        #- router3/frr.conf:/etc/frr/frr.conf
    pe4:
      kind: linux
      image: frrouting/frr:v7.5.1
      binds:
        - router3/daemons:/etc/frr/daemons
        #- router3/frr.conf:/etc/frr/frr.conf
    ce5:
      kind: linux
      image: frrouting/frr:v7.5.1
      binds:
        - router3/daemons:/etc/frr/daemons
        #- router3/frr.conf:/etc/frr/frr.conf
    ce6:
      kind: linux
      image: frrouting/frr:v7.5.1
      binds:
        - router3/daemons:/etc/frr/daemons
        #- router3/frr.conf:/etc/frr/frr.conf

    # PC1:
    #   kind: linux
    #   image: praqma/network-multitool:latest
    # PC2:
    #   kind: linux
    #   image: praqma/network-multitool:latest
    # PC3:
    #   kind: linux
    #   image: praqma/network-multitool:latest

  links:
    - endpoints: ["pe1:eth1", "p2:eth1"]
    - endpoints: ["pe1:eth2", "p3:eth1"]
    - endpoints: ["pe1:eth3", "ce5:eth1"]
    - endpoints: ["p2:eth2", "pe4:eth1"]
    - endpoints: ["p3:eth2", "pe4:eth2"]  
    - endpoints: ["pe4:eth3", "ce6:eth1"]   

    # - endpoints: ["PC1:eth1", "router1:eth3"]
    # - endpoints: ["PC2:eth1", "router2:eth3"]
    # - endpoints: ["PC3:eth1", "router3:eth3"]