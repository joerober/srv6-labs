name: trex

mgmt:
  network: trexmgt_net
  ipv4-subnet: 172.20.99.0/24
  ipv6-subnet: 2001:172:20:99::/80

topology:
  nodes:

    trex01:
      kind: linux
      image: trexcisco/trex:latest
      binds: 
        - ansible/files/trex01/trex_cfg.yaml:/etc/trex_cfg.yaml
      startup-config: |
        ip addr add 10.101.1.2/24 dev eth1
        ip addr add fc00:0:101:1::2/64 dev eth1
        ip route add 10.0.0.0/8 via 10.101.1.1 dev eth1
        ip -6 route add fc00:0000::/32 via fc00:0:101:1::1 dev eth1
      cmd: /var/trex/v2.41/t-rex-64 -i

    trex02:
      kind: linux
      image: trexcisco/trex:latest
      binds: 
        - ansible/files/trex02/trex_cfg.yaml:/etc/trex_cfg.yaml

    trex03:
      kind: linux
      image: trexcisco/trex:latest
      binds: 
        - ansible/files/trex03/trex_cfg.yaml:/etc/trex_cfg.yaml

    trex04:
      kind: linux
      image: trexcisco/trex:latest
      binds: 
        - ansible/files/trex04/trex_cfg.yaml:/etc/trex_cfg.yaml

    trex05:
      kind: linux
      image: trexcisco/trex:latest
      binds: 
        - ansible/files/trex05/trex_cfg.yaml:/etc/trex_cfg.yaml

    trex09:
      kind: linux
      image: trexcisco/trex:latest
      binds: 
        - ansible/files/trex09/trex_cfg.yaml:/etc/trex_cfg.yaml

    xrd01-host:
      kind: bridge

  links:
    - endpoints: ["trex99:eth1","xrd01-host:trex99-eth1"]
