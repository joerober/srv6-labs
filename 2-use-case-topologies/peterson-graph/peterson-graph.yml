#   The peterson.yml launches a containerlab XRd topology where the XRd instances are connected
#   in a Peterson Graph Topology: https://en.wikipedia.org/wiki/Petersen_graph
#

name: peterson

mgmt:
  network: pete_mgt_net
  ipv4_subnet: 172.20.15.0/24
  ipv6_subnet: 2001:172:20:15::/80

topology:
  nodes:
    xrd01:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.1.200G
      mgmt_ipv4: 172.20.15.201
      mgmt_ipv6: 2001:172:20:15::201
      startup-config: config/xrd01.cfg

    xrd02:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.1.200G
      mgmt_ipv4: 172.20.15.202
      mgmt_ipv6: 2001:172:20:15::202
      startup-config: config/xrd02.cfg

    xrd03:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.1.200G
      mgmt_ipv4: 172.20.15.203
      mgmt_ipv6: 2001:172:20:15::203
      startup-config: config/xrd03.cfg

    xrd04:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.1.200G
      mgmt_ipv4: 172.20.15.204
      mgmt_ipv6: 2001:172:20:15::204
      startup-config: config/xrd04.cfg

    xrd05:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.1.200G
      mgmt_ipv4: 172.20.15.205
      mgmt_ipv6: 2001:172:20:15::205
      startup-config: config/xrd05.cfg

    xrd06:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.1.200G
      mgmt_ipv4: 172.20.15.206
      mgmt_ipv6: 2001:172:20:15::206
      startup-config: config/xrd06.cfg

    xrd07:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.1.200G
      mgmt_ipv4: 172.20.15.207
      mgmt_ipv6: 2001:172:20:15::207
      startup-config: config/xrd07.cfg

    xrd08:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.1.200G
      mgmt_ipv4: 172.20.15.208
      mgmt_ipv6: 2001:172:20:15::208
      startup-config: config/xrd08.cfg

    xrd09:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.1.200G
      mgmt_ipv4: 172.20.15.209
      mgmt_ipv6: 2001:172:20:15::209
      startup-config: config/xrd09.cfg

    xrd10:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.1.200G
      mgmt_ipv4: 172.20.15.210
      mgmt_ipv6: 2001:172:20:15::210
      startup-config: config/xrd10.cfg

    xrd11:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.1.200G
      mgmt_ipv4: 172.20.15.211
      mgmt_ipv6: 2001:172:20:15::211
      startup-config: config/xrd11.cfg

    trex01:
      kind: linux
      image: trexcisco/trex:latest

    trex09:
      kind: linux
      image: trexcisco/trex:latest

    ubuntu01:
      kind: linux
      image: ubuntu:latest

    xrd01-host:
      kind: bridge
    xrd02-host:
      kind: bridge
    xrd03-host:
      kind: bridge
    xrd04-host:
      kind: bridge
    xrd05-host:
      kind: bridge
    xrd06-host:
      kind: bridge
    xrd07-host:
      kind: bridge
    xrd08-host:
      kind: bridge
    xrd09-host:
      kind: bridge
    xrd10-host:
      kind: bridge

  links:
    - endpoints: ["xrd01:Gi0-0-0-0", "xrd02:Gi0-0-0-0"]
    - endpoints: ["xrd01:Gi0-0-0-1", "xrd03:Gi0-0-0-0"]
    - endpoints: ["xrd01:Gi0-0-0-2", "xrd04:Gi0-0-0-0"]
    - endpoints: ["xrd01:Gi0-0-0-3", "xrd01-host:xrd01-Gi0-0-0-3"]
    - endpoints: ["trex01:eth1","xrd01-host:trex01-eth1"]
    - endpoints: ["ubuntu01:eth1","xrd01-host:ubuntu01-eth1"]

    - endpoints: ["xrd02:Gi0-0-0-1", "xrd05:Gi0-0-0-0"]
    - endpoints: ["xrd02:Gi0-0-0-2", "xrd09:Gi0-0-0-0"]
    - endpoints: ["xrd02:Gi0-0-0-3", "xrd02-host:xrd02-Gi0-0-0-3"]

    - endpoints: ["xrd03:Gi0-0-0-1", "xrd06:Gi0-0-0-0"]
    - endpoints: ["xrd03:Gi0-0-0-2", "xrd10:Gi0-0-0-0"]
    - endpoints: ["xrd03:Gi0-0-0-3", "xrd03-host:xrd03-Gi0-0-0-3"]

    - endpoints: ["xrd04:Gi0-0-0-1", "xrd07:Gi0-0-0-0"]
    - endpoints: ["xrd04:Gi0-0-0-2", "xrd08:Gi0-0-0-0"]
    - endpoints: ["xrd04:Gi0-0-0-3", "xrd04-host:xrd04-Gi0-0-0-3"]

    - endpoints: ["xrd05:Gi0-0-0-1", "xrd06:Gi0-0-0-1"]
    - endpoints: ["xrd05:Gi0-0-0-2", "xrd08:Gi0-0-0-1"]
    - endpoints: ["xrd05:Gi0-0-0-3", "xrd05-host:xrd05-Gi0-0-0-3"]

    - endpoints: ["xrd06:Gi0-0-0-2", "xrd07:Gi0-0-0-1"]
    - endpoints: ["xrd06:Gi0-0-0-3", "xrd06-host:xrd06-Gi0-0-0-3"]

    - endpoints: ["xrd07:Gi0-0-0-2", "xrd09:Gi0-0-0-1"]
    - endpoints: ["xrd07:Gi0-0-0-3", "xrd07-host:xrd07-Gi0-0-0-3"]

    - endpoints: ["xrd08:Gi0-0-0-2", "xrd10:Gi0-0-0-1"]
    - endpoints: ["xrd08:Gi0-0-0-3", "xrd08-host:xrd08-Gi0-0-0-3"]

    - endpoints: ["xrd09:Gi0-0-0-2", "xrd10:Gi0-0-0-2"]
    - endpoints: ["xrd09:Gi0-0-0-3", "xrd09-host:xrd09-Gi0-0-0-3"]
    - endpoints: ["trex09:eth1","xrd09-host:trex09-eth1"]

    - endpoints: ["xrd10:Gi0-0-0-3", "xrd10-host:xrd10-Gi0-0-0-3"]
    - endpoints: ["xrd10:Gi0-0-0-4", "xrd11:Gi0-0-0-0"]